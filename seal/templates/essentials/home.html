{% extends 'base.html' %}


{% block content %}
	{% include 'includes/sidebar.j2' %}
	<div class="w3-main" style="margin-left:350px">
		<div class="w3-padding">
			<table id="samples" class="w3-table-all w3-hoverable" style="width:100%">
				<thead>
					<tr class="w3-flat-green-sea">
						<th><div class="w3-padding">Sample Name</div></th>
						<th><div class="w3-padding">Family ID</div></th>
						<th><div class="w3-padding">Status</div></th>
					</tr>
				</thead>
				<tfoot>
					<tr class="w3-flat-green-sea">
						<th><div class="w3-padding">Sample Name</div></th>
						<th><div class="w3-padding">Family ID</div></th>
						<th><div class="w3-padding">Status</div></th>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
{% endblock %}


{% block script %}
	$(document).ready(function() {
	    table = $('#samples').DataTable({
			scrollX: true,
    		ajax: '/json/samples',
    		"columns": [
				{
					"className": 'showTitle no-padding',
					"data": {
						"_": "samplename",
						"display": function ( data, type, row ) {
							response = "";
							if (data["samplename"]) {
								response = data["samplename"];
							}
							status = data["status"];
							if ( status == 1 ) {
								return '<div class="w3-padding" style="width:100%">' + response + '</div>';
							}
							return '<div class="w3-padding w3-disabled" style="width:100%">' + response + '</div>';
		                },
					}
				},
		        {
					"className": 'showTitle no-padding',
					"data": {
						"_": "family",
						"display": function ( data, type, row ) {
							response = "";
							if (data["family"]) {
								response = data["family"];
							}
							status = data["status"];
							if ( status == 1 ) {
								return '<div class="w3-padding" style="width:100%">' + response + '</div>';
							}
							return '<div class="w3-padding w3-disabled" style="width:100%">' + response + '</div>';
		                },
					}
				},
		        {
					"className": 'showTitle no-padding w3-center control-size-100',
					"data": {
						"_": "status",
						"display": function ( data, type, row ) {
							status = data["status"];
							if (status == -1) {
								response = '<i title="Error" class="w3-text-flat-alizarin fas fa-times-circle"></i>';
							} else if (status == '0') {
								response = '<i title="In Proceedings" class="w3-text-flat-peter-river fa-spin fas fa-circle-notch"></i>';
							} else if (status == 1) {
								response = '<i title="Valid" class="w3-text-flat-emerald fas fa-check-circle"></i>';
							} else {
								response = '<i title="Warning" class="w3-text-flat-orange fas fa-exclamation-triangle"></i>';
							}
							if ( status == 1 ) {
								return '<div class="w3-padding" style="width:100%">' + response + '</div>';
							}
							return '<div class="w3-padding w3-disabled" style="width:100%">' + response + '</div>';
		                },
					}
				}
			]
		});

		$('#samples tbody').on( 'click', 'tr', function () {
			id = table.row( this ).data().id;
			status = table.row( this ).data().status;
			if (status == 1) {
				document.location.href = "/sample/" + id;
			}
		} );

	} );


	// Script to open and close sidebar
	function w3_open() {
		document.getElementById("sidebar").style.display = "block";
		document.getElementById("overlay").style.display = "block";
	}

	function w3_close() {
		document.getElementById("sidebar").style.display = "none";
		document.getElementById("overlay").style.display = "none";
	}
{% endblock %}


{% block static %}
	<style>
		tbody tr:hover {
			cursor: pointer;
		}
	</style>
{% endblock %}
